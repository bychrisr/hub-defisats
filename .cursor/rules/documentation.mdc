---
description: Regras para atualizaÃ§Ã£o automÃ¡tica da documentaÃ§Ã£o.
globs: []
alwaysApply: true
---

# Regras de DocumentaÃ§Ã£o para Cursor AI

## ğŸ¯ Objetivo

Garantir que toda documentaÃ§Ã£o criada ou atualizada pela Cursor AI siga os padrÃµes estabelecidos em `.system/DOCUMENTATION_STANDARDS.md` e mantenha a qualidade exemplar demonstrada em `.system/docs/lnmarkets/`.

## ğŸ“š Regras Principais

### 1. SEMPRE Seguir DOCUMENTATION_STANDARDS.md

- **Estrutura de pastas padrÃ£o**: Use o template definido
- **Template de arquivo obrigatÃ³rio**: Todos os arquivos devem ter metadados
- **Metadados completos**: Status, versÃ£o, data, responsÃ¡vel

**VerificaÃ§Ã£o:**
```bash
# Antes de commitar, verificar se documentaÃ§Ã£o segue padrÃµes
cat .system/DOCUMENTATION_STANDARDS.md

2. Usar .system/docs/lnmarkets/ como ReferÃªncia Gold Standard
Copiar estrutura e estilo: Mantenha mesmo padrÃ£o
Manter mesmo nÃ­vel de qualidade: NÃ£o aceitar documentaÃ§Ã£o inferior
Seguir exemplos existentes: Use como template

Exemplos de Qualidade:

.system/docs/lnmarkets/README.md - Ãndice completo
.system/docs/lnmarkets/internal-implementation/01-architecture.md - Arquitetura detalhada
.system/docs/lnmarkets/internal-implementation/02-best-practices.md - Exemplos prÃ¡ticos
.system/docs/lnmarkets/internal-implementation/05-examples.md - Code snippets testados
3. Separar external-api de internal-implementation

NUNCA misturar os dois contextos:

âœ… CORRETO:
.system/docs/feature/
â”œâ”€â”€ external-api/          # API de terceiros (LN Markets, Stripe, etc.)
â”‚   â””â”€â”€ 01-overview.md
â””â”€â”€ internal-implementation/  # Nossa implementaÃ§Ã£o
    â””â”€â”€ 01-architecture.md

âŒ ERRADO:
.system/docs/feature/
â””â”€â”€ implementation.md      # Mistura API externa com nossa implementaÃ§Ã£o

4. Incluir Exemplos PrÃ¡ticos Testados
Code snippets do projeto real: Nunca inventar exemplos
NÃ£o code snippets genÃ©ricos: Usar cÃ³digo real do Axisor
Testar antes de documentar: Garantir que funciona

Exemplo:

// âœ… CORRETO: CÃ³digo real do projeto
const lnMarketsService = new LNMarketsAPIv2({
  credentials: {
    apiKey: credentials.credentials['API Key'],
    apiSecret: credentials.credentials['API Secret'],
    passphrase: credentials.credentials['Passphrase'],
    isTestnet: false
  },
  logger: console as any
});

const user = await lnMarketsService.user.getUser();

5. Manter Metadados Atualizados

Sempre incluir no topo de cada arquivo:

# Feature Name - Document Title

> **Status**: Active  
> **Ãšltima AtualizaÃ§Ã£o**: 2025-01-09  
> **VersÃ£o**: 1.0.0  
> **ResponsÃ¡vel**: System Name  


Atualizar quando:

Mudar conteÃºdo do documento
Deprecar funcionalidade
Versionar mudanÃ§as importantes
6. Cross-References Devem Funcionar
Testar todos os links: Garantir que nÃ£o estÃ£o quebrados
Usar caminhos relativos: Nunca absolutos
Atualizar se arquivos movidos: Manter referÃªncias corretas

Formato:

# âœ… CORRETO
Ver [Arquitetura](./internal-implementation/01-architecture.md)
Ver [Erro de Signature](./internal-implementation/04-troubleshooting.md#signature-is-not-valid)

# âŒ ERRADO
Ver Arquitetura (sem link)
Ver /home/user/.system/docs/architecture.md (caminho absoluto)

7. Code Snippets Devem Ter Syntax Highlighting

Sempre especificar a linguagem:

// âœ… CORRETO
const example = 'with highlighting';

// âŒ ERRADO (sem linguagem especificada)
const example = 'no highlighting';


Incluir comentÃ¡rios explicativos:

const apiKey = credentials.credentials['API Key'];  // Access with bracket notation
const balance = user.balance ?? 0;                   // Fallback to 0 if null

8. Diagramas Quando Ãšteis

PreferÃªncia:

Mermaid (cÃ³digo como diagrama)
ASCII art (aceitÃ¡vel para diagramas simples)
Imagens (Ãºltimo recurso)

Exemplo Mermaid:

graph TB
    A[Client] --> B[API]
    B --> C[LNMarketsAPIv2]
    C --> D[External API]

9. Changelog Sempre Atualizado

Toda mudanÃ§a relevante deve estar no CHANGELOG:

## [Unreleased]

### Added
- Nova feature X com documentaÃ§Ã£o completa
- DocumentaÃ§Ã£o de troubleshooting para erro Y

### Changed
- Refatorada documentaÃ§Ã£o de arquitetura
- Atualizado diagrama de fluxo de dados

### Fixed
- Corrigido link quebrado em README
- Atualizado exemplo de autenticaÃ§Ã£o

10. DocumentaÃ§Ã£o Antes do Commit

Workflow obrigatÃ³rio:

# 1. Fazer mudanÃ§a no cÃ³digo
git add backend/src/services/new-service.ts

# 2. Criar/Atualizar documentaÃ§Ã£o
git add .system/docs/feature/internal-implementation/01-architecture.md

# 3. Atualizar CHANGELOG
git add .system/CHANGELOG.md

# 4. Commit incluindo tudo
git commit -m "feat(feature): implement new service

- Implement new service X
- Add architecture documentation
- Update changelog"

ğŸš€ Comandos Ãšteis
Criar Nova Estrutura de DocumentaÃ§Ã£o
# Usar script automatizado
./.system/scripts/create-docs-structure.sh stripe-integration

# Resultado: Estrutura completa em .system/docs/stripe-integration/

Verificar Markdown
# Validar sintaxe de todos os arquivos .md
npx markdownlint-cli .system/docs/**/*.md

# Verificar links quebrados
npx markdown-link-check .system/docs/lnmarkets/README.md

Gerar TOC AutomÃ¡tico
# Gerar Ã­ndice automaticamente
npx markdown-toc -i .system/docs/feature/README.md

ğŸ“‹ Checklist de Qualidade

Antes de marcar documentaÃ§Ã£o como completa:

 Metadados: Status, versÃ£o, data, responsÃ¡vel preenchidos
 TOC: Ãndice presente e atualizado
 Code Snippets: Testados e funcionais
 Exemplos PrÃ¡ticos: IncluÃ­dos e reais (nÃ£o genÃ©ricos)
 Cross-References: Links funcionando corretamente
 Links para CÃ³digo: ReferÃªncias ao cÃ³digo fonte
 Typos: Sem erros ortogrÃ¡ficos
 Markdown VÃ¡lido: Sem erros de sintaxe
 Diagramas: IncluÃ­dos quando necessÃ¡rio
 Changelog: Atualizado em .system/CHANGELOG.md
 Commit: DocumentaÃ§Ã£o commitada junto com cÃ³digo
ğŸš¨ Avisos CrÃ­ticos
âŒ NUNCA Fazer

DocumentaÃ§Ã£o sem metadados

âŒ ERRADO:
# TÃ­tulo
ConteÃºdo...

âœ… CORRETO:
# TÃ­tulo
> **Status**: Active
> **Ãšltima AtualizaÃ§Ã£o**: 2025-01-09
ConteÃºdo...


Code snippets sem syntax highlighting

âŒ ERRADO:
```
const x = 1;
```

âœ… CORRETO:
```typescript
const x = 1;
```


Exemplos genÃ©ricos

âŒ ERRADO:
const service = new Service();

âœ… CORRETO:
const lnMarketsService = new LNMarketsAPIv2({
  credentials: realCredentials,
  logger: logger
});


Links quebrados

âŒ ERRADO:
Ver [Docs](./non-existent-file.md)

âœ… CORRETO:
Ver [Architecture](./internal-implementation/01-architecture.md)


DocumentaÃ§Ã£o desatualizada

Sempre atualizar quando cÃ³digo mudar
Marcar como Deprecated se obsoleto
Remover apÃ³s perÃ­odo de transiÃ§Ã£o
âœ… SEMPRE Fazer
Seguir DOCUMENTATION_STANDARDS.md
Usar .system/docs/lnmarkets/ como referÃªncia
Testar code snippets antes de documentar
Atualizar CHANGELOG.md
Commitar docs junto com cÃ³digo
Verificar links funcionam
Incluir metadados completos
Separar external-api de internal-implementation
Usar diagramas quando Ãºtil
Manter qualidade gold standard
ğŸ“Œ AtualizaÃ§Ã£o de Tarefas e Documentos Relacionados

Sempre que uma tarefa ou subtarefa for concluÃ­da, atualize os seguintes arquivos:

.system/ROADMAP.md â†’ Atualize status da tarefa (âœ… ConcluÃ­do, ğŸš§ Em Progresso, â³ A Fazer).
.system/CHANGELOG.md â†’ Sempre atualizado em [Unreleased], depois versionado.
.system/DECISIONS.md â†’ Registre decisÃµes tÃ©cnicas novas ou alteradas.
.system/OWNER_TASKS.md â†’ Registre pendÃªncias externas bloqueantes.
.system/docs/ â†’ Mantenha coerÃªncia de arquitetura, API, requisitos, user-stories.
ğŸ¯ Exemplo de Workflow Completo
# 1. Criar nova feature
mkdir -p backend/src/services/payment

# 2. Criar documentaÃ§Ã£o automaticamente
./.system/scripts/create-docs-structure.sh payment-integration

# 3. Implementar cÃ³digo
vim backend/src/services/payment/payment.service.ts

# 4. Preencher documentaÃ§Ã£o
vim .system/docs/payment-integration/internal-implementation/01-architecture.md
vim .system/docs/payment-integration/internal-implementation/05-examples.md

# 5. Adicionar exemplos testados
npm test -- payment.service.test.ts

# 6. Atualizar CHANGELOG
vim .system/CHANGELOG.md

# 7. Verificar markdown
npx markdownlint-cli .system/docs/payment-integration/**/*.md

# 8. Commit tudo junto
git add backend/src/services/payment .system/docs/payment-integration .system/CHANGELOG.md
git commit -m "feat(payment): implement payment integration

- Implement payment service
- Add complete documentation
- Add examples and tests"

# 9. Push
git push origin feature/payment-integration

ğŸ“š ReferÃªncias
DOCUMENTATION_STANDARDS.md - PadrÃµes completos
.system/docs/lnmarkets/ - Exemplo gold standard
create-docs-structure.sh - Script de criaÃ§Ã£o

Ãšltima AtualizaÃ§Ã£o: 2025-01-09
VersÃ£o: 1.0.1
ResponsÃ¡vel: Sistema de DocumentaÃ§Ã£o Axisor